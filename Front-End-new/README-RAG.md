# نظام RAG - دكان فيجين

## نظرة عامة
تم دمج نظام RAG (Retrieval-Augmented Generation) مع لوحة تحكم المستخدم في تطبيق دكان فيجين. هذا النظام يوفر مساعد ذكي يمكنه الإجابة على أسئلة المستخدمين حول المنتجات والفروع والفواتير.

## الميزات

### 🎯 المساعد الافتراضي
- **الموقع**: لوحة تحكم المستخدم → "المساعد الافتراضي"
- **الوظائف**:
  - الإجابة على أسئلة المنتجات
  - معلومات الفروع
  - استعلامات الفواتير
  - أسئلة عامة

### 🌐 دعم اللغات
- **العربية**: "ما هي المنتجات؟"، "أين الفروع؟"
- **الإنجليزية**: "products", "branches", "invoices"

### 🔧 الميزات التقنية
- معالجة الأخطاء
- مؤشرات التحميل
- واجهة مستخدم تفاعلية
- دعم مفتاح Enter

## كيفية الاستخدام

### 1. تشغيل التطبيق
```bash
# تشغيل خادم محلي
python server.py

# أو استخدام خادم بسيط
python -m http.server 8000
```

### 2. الوصول للتطبيق
- **التطبيق الرئيسي**: http://localhost:8000/user.html
- **اختبار RAG**: http://localhost:8000/test-rag.html

### 3. استخدام المساعد
1. افتح لوحة تحكم المستخدم
2. اذهب لقسم "المساعد الافتراضي"
3. اكتب سؤالك في مربع النص
4. اضغط "إرسال" أو Enter

## أمثلة على الأسئلة

### المنتجات
- "ما هي المنتجات المتوفرة؟"
- "عرض المنتجات"
- "products"

### الفروع
- "أين الفروع؟"
- "عرض الفروع"
- "branches"

### الفواتير
- "أعطني فواتيري"
- "عرض الفواتير"
- "invoices"

## الإعداد

### 1. متطلبات البيئة
```bash
# تثبيت Node.js dependencies
npm install

# أو استخدام Python
pip install -r requirements.txt
```

### 2. متغيرات البيئة
أنشئ ملف `.env` في مجلد `Front-End-new`:
```env
OPENAI_API_KEY=your_openai_api_key_here
SUPABASE_URL=your_supabase_url
SUPABASE_KEY=your_supabase_key
```

### 3. إعداد قاعدة البيانات
تأكد من وجود الجداول التالية في Supabase:
- `products`: المنتجات
- `branches`: الفروع
- `invoices`: الفواتير
- `documents`: للـ RAG

## هيكل الملفات

```
Front-End-new/
├── Rag.js              # نظام RAG الرئيسي
├── user.html           # لوحة تحكم المستخدم
├── js/
│   └── user.js         # دوال المستخدم
├── css/
│   └── user.css        # أنماط CSS
└── server.py           # خادم محلي
```

## استكشاف الأخطاء

### مشاكل شائعة
1. **خطأ CORS**: استخدم الخادم المحلي `server.py`
2. **مفتاح API**: تأكد من صحة مفتاح OpenAI
3. **اتصال قاعدة البيانات**: تحقق من إعدادات Supabase

### رسائل الخطأ
- "المكتبات غير متوفرة": النظام سيعمل بالنسخة الاحتياطية
- "خطأ في الاتصال": تحقق من الإنترنت وإعدادات API

## التطوير

### إضافة ميزات جديدة
1. عدّل `Rag.js` لإضافة منطق جديد
2. أضف أنماط CSS في `user.css`
3. اختبر في `test-rag.html`

### تخصيص الردود
عدّل دالة `getFallbackResponse()` في `Rag.js` لإضافة ردود مخصصة.

## الأمان

### ⚠️ تحذيرات مهمة
- لا تضع مفاتيح API في الكود مباشرة
- استخدم متغيرات البيئة
- لا ترفع ملفات `.env` إلى Git

### أفضل الممارسات
- استخدم HTTPS في الإنتاج
- تحقق من صحة المدخلات
- سجل الأخطاء للتتبع

## الدعم

للمساعدة أو الإبلاغ عن مشاكل:
1. تحقق من ملف README هذا
2. راجع console المتصفح للأخطاء
3. تأكد من إعدادات البيئة

---

**تم تطوير هذا النظام كجزء من مشروع TuwaiqPick Capstone**
